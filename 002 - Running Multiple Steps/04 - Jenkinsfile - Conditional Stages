pipeline {
    agent { 
		docker { 
			image 'alpine:latest' 
		}
	}
    stages {
        stage('User Input') {
            steps {
                script {
                    def userInput = input(
                        id: 'userInput',
                        message: 'Select an action:',
                        parameters: [
                            choice(choices: ['Build', 'Test'], description: 'Action', name: 'ACTION')
                        ]
                    )
                    
                    def selectedStage = userInput['stageSelection']
                    
                    if (selectedStage == 'build') {
                        buildStage()
                    } else if (selectedStage == 'test') {
                        testStage()
                    } else {
                        error "Invalid stage selection: ${selectedStage}"
                    }
                }
            }
        }
    }
}

def buildStage() {
    stage('Build') {
        steps {
            echo "Executing build stage..."
            // Perform build operations here
            echo "Build stage completed."
        }
    }
}

def testStage() {
    stage('Test') {
        steps {
            echo "Executing test stage..."
            // Perform test operations here
            echo "Test stage completed."
        }
    }
}
